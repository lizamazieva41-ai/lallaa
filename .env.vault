# Vault-Enabled Environment Configuration
# This file demonstrates how to configure the application to use HashiCorp Vault

# ========== VAULT INTEGRATION SETTINGS ==========

# Vault Connection Configuration
VAULT_ADDR=http://localhost:8200
VAULT_TOKEN=bin-check-vault-root
VAULT_MOUNT_POINT=secret/data

# ========== APPLICATION VARIABLES (USING VAULT) ==========

# Application
NODE_ENV=production
API_PORT=8080
API_HOST=0.0.0.0
FRONTEND_URL=http://localhost:3000

# Database Configuration (will be loaded from Vault)
# Actual values stored in Vault:
# - POSTGRES_PASSWORD -> secret/data/POSTGRES_PASSWORD
# - DATABASE_URL -> secret/data/DATABASE_URL
DB_HOST=localhost
DB_PORT=5432
POSTGRES_USER=bincheck
POSTGRES_DB=bincheck
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

# Redis Configuration (will be loaded from Vault)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=vault:secret/data/REDIS_PASSWORD
REDIS_DB=0
REDIS_KEY_PREFIX=bincheck:

# JWT Configuration (will be loaded from Vault)
# Actual values stored in Vault:
# - JWT_SECRET -> secret/data/JWT_SECRET
# - JWT_REFRESH_SECRET -> secret/data/JWT_REFRESH_SECRET
JWT_SECRET=vault:secret/data/JWT_SECRET
JWT_REFRESH_SECRET=vault:secret/data/JWT_REFRESH_SECRET
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Security Configuration (will be loaded from Vault)
# Actual values stored in Vault:
# - BCRYPT_ROUNDS -> secret/data/BCRYPT_ROUNDS
BCRYPT_ROUNDS=vault:secret/data/BCRYPT_ROUNDS
SALT_ROUNDS=10
API_KEY_PREFIX=bincheck
API_KEY_BYTES=32

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_FAIL_POLICY=open
RATE_LIMIT_MAX_FREE=100
RATE_LIMIT_MAX_BASIC=500
RATE_LIMIT_MAX_PREMIUM=2000
RATE_LIMIT_MAX_ENTERPRISE=10000

# Logging
LOG_LEVEL=info
LOG_FILE_PATH=./logs
LOG_MAX_FILES=5
LOG_MAX_SIZE=20m

# CORS
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# ========== ETL SCRIPTS VARIABLES ==========

# ETL Configuration (will be loaded from Vault)
# Actual values stored in Vault:
# - BIN_CHECK_ADMIN_SECRET -> secret/data/BIN_CHECK_ADMIN_SECRET
ADMIN_SECRET=vault:secret/data/BIN_CHECK_ADMIN_SECRET

# ETL Data Sources
BIN_DATA_SOURCES_PRIORITY=binlist/data,venelinkochev/bin-list-data,aderyabin/bin_list
BIN_DATA_CACHE_TTL=3600

# ETL Output Configuration
ETL_OUTPUT_DIR=./data/processed
ETL_BACKUP_DIR=./data/backup
ETL_LOG_LEVEL=info

# ========== SHARED VARIABLES ==========

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=vault:secret/data/SMTP_PASSWORD
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Payment Sandbox API

# API Keys (will be loaded from Vault)
# Actual values stored in Vault:
# - BIN_CHECK_API_KEY -> secret/data/BIN_CHECK_API_KEY
BIN_CHECK_API_KEY=vault:secret/data/BIN_CHECK_API_KEY

# Feature Flags
FEATURE_CARD_GENERATION=false
FEATURE_TEST_CARDS_ACCESS=true
FEATURE_ADMIN_PANEL=true

# Development/Testing
DEBUG_MODE=false
FEATURE_CARD_GENERATION_PRODUCTION_UNLOCK=false

# Monitoring
HEALTH_CHECK_EXTERNAL_URL=
METRICS_EXTERNAL_ENDPOINT=

# ========== INTEGRATION NOTES ==========

# Application Integration Steps:
# 1. Install Vault client: npm install @hashicorp/vault-node
# 2. Create Vault service to read secrets
# 3. Update configuration loading to use Vault
# 4. Test application with Vault secrets
# 5. Implement secret rotation policies

# Vault Integration Example:
# const vault = require('node-vault')({
#   endpoint: process.env.VAULT_ADDR,
#   token: process.env.VAULT_TOKEN
# });
# 
# async function loadSecret(key) {
#   try {
#     const result = await vault.read(`secret/data/${key}`);
#     return result.data.data.value;
#   } catch (error) {
#     console.error(`Failed to load secret ${key}:`, error);
#     throw error;
#   }
# }